apiVersion: v1
kind: Pod
metadata:
  annotations:
    descheduler.alpha.kubernetes.io/request-evict-only: ""
    kubectl.kubernetes.io/default-container: compute
    kubevirt.io/domain: cirros-test
    kubevirt.io/migrationTransportUnix: "true"
  creationTimestamp: null
  labels:
    kubevirt.io: virt-launcher
    kubevirt.io/created-by: ""
    vm.kubevirt.io/name: cirros-test
    vmi.kubevirt.io/id: cirros-test
  name: virt-launcher-cirros-test
  ownerReferences:
  - apiVersion: kubevirt.io/v1
    blockOwnerDeletion: true
    controller: true
    kind: VirtualMachineInstance
    name: cirros-test
    uid: ""
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: node-labeller.kubevirt.io/obsolete-host-model
            operator: DoesNotExist
  automountServiceAccountToken: false
  containers:
  - command:
    - /usr/bin/virt-launcher-monitor
    - --qemu-timeout
    - 244s
    - --name
    - cirros-test
    - --uid
    - ""
    - --namespace
    - default
    - --kubevirt-share-dir
    - /var/run/kubevirt
    - --ephemeral-disk-dir
    - /var/run/kubevirt-ephemeral-disks
    - --container-disk-dir
    - /var/run/kubevirt/container-disks
    - --grace-period-seconds
    - "45"
    - --hook-sidecars
    - "0"
    - --ovmf-path
    - /usr/share/OVMF
    - --disk-memory-limit
    - "2097152000"
    - --run-as-nonroot
    env:
    - name: XDG_CACHE_HOME
      value: /var/run/kubevirt-private
    - name: XDG_CONFIG_HOME
      value: /var/run/kubevirt-private
    - name: XDG_RUNTIME_DIR
      value: /var/run
    - name: POD_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.name
    - name: STANDALONE_VMI
      value: '{"kind":"VirtualMachineInstance","apiVersion":"kubevirt.io/v1","metadata":{"name":"cirros-test","namespace":"default","creationTimestamp":null,"ownerReferences":[{"apiVersion":"kubevirt.io/v1","kind":"VirtualMachine","name":"cirros-test","uid":"","controller":true,"blockOwnerDeletion":true}]},"spec":{"domain":{"resources":{"requests":{"cpu":"1","memory":"128Mi"}},"cpu":{"cores":1,"sockets":1,"maxSockets":4,"threads":1,"model":"host-model"},"memory":{"guest":"128Mi"},"machine":{"type":"q35"},"firmware":{"uuid":"5b8fc9fe-91d0-5adb-a2b1-f20e810e2e94"},"features":{"acpi":{"enabled":true}},"devices":{"disks":[{"name":"containerdisk","disk":{"bus":"sata"}}],"interfaces":[{"name":"default","masquerade":{}}]}},"evictionStrategy":"None","volumes":[{"name":"containerdisk","containerDisk":{"image":"quay.io/kubevirt/cirros-container-disk-demo:latest","imagePullPolicy":"Always"}}],"networks":[{"name":"default","pod":{}}],"architecture":"amd64"},"status":{"guestOSInfo":{},"runtimeUser":107,"currentCPUTopology":{"cores":1,"sockets":1,"threads":1},"memory":{"guestAtBoot":"128Mi","guestCurrent":"128Mi","guestRequested":"128Mi"}}}'
    image: quay.io/kubevirt/virt-launcher:v1.7.0
    imagePullPolicy: IfNotPresent
    name: compute
    resources:
      limits:
        devices.kubevirt.io/kvm: "1"
        devices.kubevirt.io/tun: "1"
        devices.kubevirt.io/vhost-net: "1"
      requests:
        cpu: "1"
        ephemeral-storage: 50M
        memory: 405760Ki
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        add:
        - NET_BIND_SERVICE
        drop:
        - ALL
      runAsGroup: 107
      runAsNonRoot: true
      runAsUser: 107
    terminationMessagePolicy: FallbackToLogsOnError
    volumeMounts:
    - mountPath: /var/run/kubevirt-private
      name: private
    - mountPath: /var/run/kubevirt
      name: public
    - mountPath: /var/run/kubevirt-ephemeral-disks
      name: ephemeral-disks
    - mountPath: /var/run/libvirt
      name: libvirt-runtime
    - mountPath: /var/run/kubevirt/sockets
      name: sockets
    - mountPath: /var/run/kubevirt/container-disks
      mountPropagation: HostToContainer
      name: container-disks
    - mountPath: /var/run/kubevirt/hotplug-disks/
      mountPropagation: HostToContainer
      name: hotplug-disks
  - args:
    - --copy-path
    - /var/run/kubevirt/container-disks/disk_0
    command:
    - /usr/bin/container-disk
    image: quay.io/kubevirt/cirros-container-disk-demo:latest
    imagePullPolicy: Always
    name: volumecontainerdisk
    resources:
      limits:
        cpu: 10m
        memory: 40M
      requests:
        cpu: 1m
        ephemeral-storage: 50M
        memory: 1M
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      runAsNonRoot: true
      runAsUser: 107
    volumeMounts:
    - mountPath: /var/run/kubevirt/container-disks
      name: container-disks
    - mountPath: /usr/bin
      name: virt-bin-share-dir
  enableServiceLinks: false
  hostname: cirros-test
  imagePullSecrets:
  - name: pull-secret-1
  initContainers:
  - args:
    - --logfile
    - /var/run/kubevirt-private//virt-serial0-log
    command:
    - /usr/bin/virt-tail
    env:
    - name: VIRT_LAUNCHER_LOG_VERBOSITY
      value: "2"
    image: quay.io/kubevirt/virt-launcher:v1.7.0
    imagePullPolicy: IfNotPresent
    name: guest-console-log
    resources:
      limits:
        cpu: 15m
        memory: 60M
      requests:
        cpu: 5m
        memory: 35M
    restartPolicy: Always
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      runAsNonRoot: true
      runAsUser: 107
    volumeMounts:
    - mountPath: /var/run/kubevirt-private
      name: private
      readOnly: true
  - command:
    - /usr/bin/cp
    - /usr/bin/container-disk
    - /init/usr/bin/container-disk
    env:
    - name: XDG_CACHE_HOME
      value: /var/run/kubevirt-private
    - name: XDG_CONFIG_HOME
      value: /var/run/kubevirt-private
    - name: XDG_RUNTIME_DIR
      value: /var/run
    image: quay.io/kubevirt/virt-launcher:v1.7.0
    imagePullPolicy: IfNotPresent
    name: container-disk-binary
    resources:
      limits:
        cpu: 100m
        memory: 40M
      requests:
        cpu: 10m
        memory: 1M
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      runAsGroup: 107
      runAsNonRoot: true
      runAsUser: 107
    terminationMessagePolicy: FallbackToLogsOnError
    volumeMounts:
    - mountPath: /init/usr/bin
      name: virt-bin-share-dir
  - args:
    - --no-op
    command:
    - /usr/bin/container-disk
    image: quay.io/kubevirt/cirros-container-disk-demo:latest
    imagePullPolicy: Always
    name: volumecontainerdisk-init
    resources:
      limits:
        cpu: 10m
        memory: 40M
      requests:
        cpu: 1m
        ephemeral-storage: 50M
        memory: 1M
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
      runAsNonRoot: true
      runAsUser: 107
    volumeMounts:
    - mountPath: /var/run/kubevirt/container-disks
      name: container-disks
    - mountPath: /usr/bin
      name: virt-bin-share-dir
  nodeSelector:
    kubernetes.io/arch: amd64
    kubevirt.io/schedulable: "true"
    machine-type.node.kubevirt.io/q35: "true"
  readinessGates:
  - conditionType: kubevirt.io/virtual-machine-unpaused
  restartPolicy: Never
  securityContext:
    fsGroup: 107
    runAsGroup: 107
    runAsNonRoot: true
    runAsUser: 107
  terminationGracePeriodSeconds: 60
  volumes:
  - emptyDir: {}
    name: private
  - emptyDir: {}
    name: public
  - emptyDir: {}
    name: sockets
  - emptyDir: {}
    name: virt-bin-share-dir
  - emptyDir: {}
    name: libvirt-runtime
  - emptyDir: {}
    name: ephemeral-disks
  - emptyDir: {}
    name: container-disks
  - emptyDir: {}
    name: hotplug-disks
status: {}

